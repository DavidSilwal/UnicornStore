@model UnicornStore.AspNet.ViewModels.Cart.IndexViewModel

@{
    ViewBag.Title = "Cart";
}

<div class="container">
    <div class="row">
        <div class="col-md-2">
            @Html.Partial("_CategorySidebar", Model.TopLevelCategories)
        </div>
        <div class="col-md-10">
            <p></p>
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">@Model.CartItems.Count() products in your cart</h3>
                </div>
                <div class="panel-body">
                    @foreach (var item in Model.CartItems)
                    {
                        <div class="row">
                            <div class="col-md-9">
                                <h4>@item.Product.DisplayName</h4>
                                <dl class="dl-horizontal">
                                    <dt>Quantity in cart:</dt>
                                    <dd>@item.Quantity</dd>
                                    <dt>Unit Price:</dt>
                                    <dd>$@item.PricePerUnit</dd>
                                    <dt>Total cost:</dt>
                                    <dd>$@(item.Quantity * item.PricePerUnit)</dd>
                                    <dd>@Html.ActionLink("Remove from cart", "Remove", new { productId = @item.ProductId })</dd>
                                </dl>
                            </div>
                            <div class="col-md-3">
                                @Html.Partial("_ProductCardThumb", item.Product)
                            </div>
                        </div>
                        <hr />
                    }
                    <div >
                        <h4>
                            Total: $@Model.CartItems.Sum(item => item.Quantity * item.PricePerUnit)
                        </h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
